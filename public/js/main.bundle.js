!function(t){function e(e){for(var n,a,r=e[0],c=e[1],h=e[2],l=0,f=[];l<r.length;l++)a=r[l],s[a]&&f.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(u&&u(e);f.length;)f.shift()();return o.push.apply(o,h||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={0:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var u=c;o.push([56,1]),i()}({56:function(t,e,i){"use strict";i.r(e);i(24),i(54);function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$canvas=document.querySelector(".canvas"),this.context=this.$canvas.getContext("2d"),this.$offScreen=document.createElement("canvas"),this.$offScreen.width=this.$canvas.width,this.$offScreen.height=this.$canvas.height,this.offScreenContext=this.$offScreen.getContext("2d"),this.$video=document.querySelector(".camera"),this.$captureButton=document.querySelector(".js-capture"),this.$scaleUpButton=document.querySelector(".js-scaleUp"),this.$scaleDownButton=document.querySelector(".js-scaleDown"),this.originalImage=null,this.imageWidth=300,this.imageHeight=300,this.scale=1,this.imagePosition={x:0,y:0},this.imagePosition_past={x:0,y:0},this.pointerPosition={startX:0,startY:0,currentX:0,currentY:0},this.diff={x:0,y:0},this.moveImageFlag=!1,this.startCamera(),this.bind()}var e,i,s;return e=t,(i=[{key:"bind",value:function(){var t=this;this.$captureButton.addEventListener("click",function(){t.renderCameraImageInCanvas()}),this.$canvas.addEventListener("mousedown",function(e){t.handleMouseDown(e)}),document.addEventListener("mousemove",function(e){t.handleMouseMove(e)}),document.addEventListener("mouseup",function(e){t.handleMouseUp(e)}),this.$scaleUpButton.addEventListener("click",function(e){t.scale*=1.1,t.render()}),this.$scaleDownButton.addEventListener("click",function(){t.scale*=.9,t.render()})}},{key:"startCamera",value:function(){var t=this;navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:300,height:300},audio:!1}).then(function(e){t.$video.srcObject=e}).catch(function(e){console.log(t.$video),alert(e)})}},{key:"stopCamera",value:function(){this.$video.srcObject.getTracks().forEach(function(t){t.stop()}),this.$video.srcObject=null}},{key:"renderCameraImageInCanvas",value:function(){var t=this.$video.offsetWidth,e=this.$video.offsetHeight;this.context.drawImage(this.$video,0,0,t,e),this.$video.classList.add("js-hide"),this.$captureButton.classList.add("js-hide"),this.$scaleUpButton.classList.remove("js-hide"),this.$scaleDownButton.classList.remove("js-hide"),this.stopCamera(),this.originalImage=this.context.getImageData(0,0,300,300)}},{key:"handleMouseDown",value:function(t){this.moveImageFlag=!0;var e=t.screenX,i=t.screenY;this.pointerPosition.startX=e,this.pointerPosition.startY=i,this.eventTarget=t.target,this.imagePosition_past.x=this.imagePosition.x,this.imagePosition_past.y=this.imagePosition.y}},{key:"handleMouseMove",value:function(t){if(this.moveImageFlag){var e=t.screenX,i=t.screenY;this.pointerPosition.currentX=e,this.pointerPosition.currentY=i,this.diff.x=e-this.pointerPosition.startX,this.diff.y=i-this.pointerPosition.startY;var n=this.diff.x/this.scale,s=this.diff.y/this.scale;this.imagePosition.x=n+this.imagePosition_past.x,this.imagePosition.y=s+this.imagePosition_past.y,this.render()}}},{key:"handleMouseUp",value:function(t){this.moveImageFlag=!1,this.pointerPosition.startX=0,this.pointerPosition.startY=0,this.pointerPosition.currentX=0,this.pointerPosition.currentY=0}},{key:"render",value:function(){this.context.clearRect(0,0,300,300),this.offScreenContext.putImageData(this.originalImage,0,0);var t=this.imagePosition.x*this.scale+this.imageWidth*(1-this.scale)/2,e=this.imagePosition.y*this.scale+this.imageHeight*(1-this.scale)/2,i=this.imageWidth*this.scale,n=this.imageHeight*this.scale;this.context.drawImage(this.$offScreen,t,e,i,n)}}])&&n(e.prototype,i),s&&n(e,s),t}();new function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new s}}});